(()=>{var e={};e.id=259,e.ids=[259],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5486:e=>{"use strict";e.exports=require("bcrypt")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10974:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(75986),o=t(8974);function n(...e){return(0,o.QP)((0,a.$)(e))}},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},16832:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>d});var a=t(65239),o=t(48088),n=t(88170),i=t.n(n),s=t(30893),c={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>s[e]);t.d(r,c);let d={children:["",{children:["admin",{children:["menu-items",{children:["[productId]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,45984)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy\\src\\app\\admin\\menu-items\\[productId]\\edit\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,99111)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,54413)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy\\src\\app\\admin\\menu-items\\[productId]\\edit\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/admin/menu-items/[productId]/edit/page",pathname:"/admin/menu-items/[productId]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32997:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,4536,23)),Promise.resolve().then(t.bind(t,54348))},33873:e=>{"use strict";e.exports=require("path")},45984:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>L,generateStaticParams:()=>O});var a=t(37413),o=t(67218);t(79130);var n=t(61120),i=t(84113),s=t(31183),c=t(58111),d=t(54348),l=t(4536),u=t.n(l),p=t(39916),f=t(23732),m=t(83204),g=t(10974);let h=n.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,g.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));h.displayName="Card";let x=n.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",e),...r}));x.displayName="CardHeader";let y=n.forwardRef(({className:e,...r},t)=>(0,a.jsx)("h3",{ref:t,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));y.displayName="CardTitle",n.forwardRef(({className:e,...r},t)=>(0,a.jsx)("p",{ref:t,className:(0,g.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let b=n.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,g.cn)("p-6 pt-0",e),...r}));b.displayName="CardContent",n.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,g.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter";let E=(0,t(50662).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),I=n.forwardRef(({className:e,variant:r,...t},o)=>(0,a.jsx)("div",{ref:o,role:"alert",className:(0,g.cn)(E({variant:r}),e),...t}));I.displayName="Alert";let N=n.forwardRef(({className:e,...r},t)=>(0,a.jsx)("h5",{ref:t,className:(0,g.cn)("mb-1 font-medium leading-none tracking-tight",e),...r}));N.displayName="AlertTitle";let v=n.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,g.cn)("text-sm [&_p]:leading-relaxed",e),...r}));v.displayName="AlertDescription";var C=t(65867),_=t(75986),A=t(17478);let $="[EditProductPage]",D={INVALID_ID:"Invalid product ID provided",PRODUCT_NOT_FOUND:"Product not found",NO_CATEGORIES:"No categories available. Please create a category first."},T=()=>(0,i.A)(),w=(0,n.cache)(async()=>{let e=T();console.log(`${$} [${e}] Fetching products`);try{let r=await (0,m.d$)();if("error"in r||!Array.isArray(r))return console.error(`${$} [${e}] Failed to fetch products:`,r?.error),[];return r}catch(r){return console.error(`${$} [${e}] Error fetching products:`,r),[]}}),S=(0,n.cache)(async()=>{let e=T();console.log(`${$} [${e}] Fetching categories`);try{let r=await (0,f.b)();if("error"in r||!Array.isArray(r))return console.error(`${$} [${e}] Failed to fetch categories:`,r?.error),[];return r}catch(r){return console.error(`${$} [${e}] Error fetching categories:`,r),[]}});async function O(){let e=T();console.log(`${$} [${e}] Generating static params`);try{return(await w()).map(e=>({productId:e.id}))}catch(r){return console.error(`${$} [${e}] Error in generateStaticParams:`,r),[]}}let F=(0,n.cache)(async e=>{let r=T();if(console.log(`${$} [${r}] Fetching product ID: ${e}`),!e||"string"!=typeof e)return console.warn(`${$} [${r}] ${D.INVALID_ID}`),null;try{let t=await s.db.product.findUnique({where:{id:e},include:{ProductTech:{select:{id:!0,name:!0}},ProductAddon:{select:{id:!0,name:!0}},category:{select:{id:!0,name:!0,order:!0}},orders:{select:{id:!0}},downloadVerifications:{select:{id:!0}}}});return t||console.warn(`${$} [${r}] ${D.PRODUCT_NOT_FOUND}`),t}catch(e){return console.error(`${$} [${r}] Error fetching product:`,e),null}});async function L({params:e}){let r=T(),{productId:t}=await e;t&&"string"==typeof t||(console.error(`${$} [${r}] ${D.INVALID_ID}`),(0,p.notFound)());let[o,i]=await Promise.all([F(t),S()]);return(o||(console.error(`${$} [${r}] ${D.PRODUCT_NOT_FOUND}`),(0,p.notFound)()),i&&0!==i.length)?(0,a.jsxs)("main",{className:(0,_.A)("min-h-screen bg-gradient-to-b from-slate-900 to-indigo-950","relative overflow-hidden py-12 px-4 sm:px-6 lg:px-8"),dir:"auto",children:[(0,a.jsxs)("div",{className:"particle-wave pointer-events-none",children:[(0,a.jsx)("div",{className:"particle",style:{width:"8px",height:"8px",top:"20%",left:"15%",animationDuration:"3s",animationDelay:"0.3s"}}),(0,a.jsx)("div",{className:"particle",style:{width:"6px",height:"6px",top:"70%",left:"80%",animationDuration:"2.5s",animationDelay:"0.8s"}})]}),(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,a.jsx)(C.A,{className:"w-8 h-8 text-indigo-200 animate-spin"})}),children:(0,a.jsx)("section",{className:"max-w-5xl mx-auto",children:(0,a.jsxs)(h,{className:(0,_.A)("glass-card bg-slate-800/30 border-indigo-600/30 shadow-lg","rounded-xl animate-reveal-text delay-200"),children:[(0,a.jsx)(x,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(y,{className:(0,_.A)("text-3xl font-bold text-indigo-200","text-gradient-primary animate-glow"),children:["Edit Product: ",o.name]}),(0,a.jsx)(u(),{href:`/${c.BV.ADMIN}/${c.bQ.MENU_ITEMS}`,className:(0,_.A)("btn-secondary text-indigo-100 font-semibold","hover:text-indigo-50 transition-colors duration-300"),"aria-label":"Return to menu items",children:"Back to Menu Items"})]})}),(0,a.jsx)(b,{children:(0,a.jsx)(d.default,{product:o,categories:i})})]})})})]}):(console.error(`${$} [${r}] ${D.NO_CATEGORIES}`),(0,a.jsxs)("main",{className:(0,_.A)("min-h-screen bg-gradient-to-b from-slate-900 to-indigo-950","relative overflow-hidden flex items-center justify-center p-6"),dir:"auto",children:[(0,a.jsxs)("div",{className:"particle-wave pointer-events-none",children:[(0,a.jsx)("div",{className:"particle",style:{width:"8px",height:"8px",top:"20%",left:"15%",animationDuration:"3s",animationDelay:"0.3s"}}),(0,a.jsx)("div",{className:"particle",style:{width:"6px",height:"6px",top:"70%",left:"80%",animationDuration:"2.5s",animationDelay:"0.8s"}})]}),(0,a.jsxs)(I,{variant:"destructive",className:(0,_.A)("max-w-md glass-card border-indigo-600/30 bg-slate-800/30","animate-reveal-text delay-200"),children:[(0,a.jsx)(N,{className:(0,_.A)("text-indigo-200 text-2xl font-bold","text-gradient-primary animate-glow"),children:"No Categories Available"}),(0,a.jsx)(v,{className:"text-red-400 text-lg",children:D.NO_CATEGORIES}),(0,a.jsx)(u(),{href:`/${c.BV.ADMIN}/${c.bQ.CATEGORIES}`,className:(0,_.A)("mt-4 inline-block btn-secondary text-indigo-100 font-semibold","hover:text-indigo-50 transition-colors duration-300"),"aria-label":"Navigate to categories management",children:"Go to Categories"})]})]}))}(0,A.D)([O,L]),(0,o.A)(O,"0077ce6a148d0e85707852e8a348dc81f12a9101aa",null),(0,o.A)(L,"405314d7f81b5fdab1a41c30a22de30808b6da403b",null)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65867:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(18618).A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},69445:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,85814,23)),Promise.resolve().then(t.bind(t,17835))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83204:(e,r,t)=>{"use strict";t.d(r,{AS:()=>h,OF:()=>y,ab:()=>E,d$:()=>x,hx:()=>b,vu:()=>I});var a=t(67218);t(79130);var o=t(61120),n=t(84113),i=t(31183),s=t(62351),c=t(17478);let d="[Products]",l="name",u={INVALID_PAGE:"Page number must be positive",INVALID_LIMIT:"Limit must be non-negative",INVALID_CATEGORY_ID:"Category ID is required",NO_PRODUCTS:"No products found",NO_BEST_SELLERS:"No best-selling products found",NO_CATEGORIES:"No categories found",FETCH_FAILED:"Failed to fetch data"},p=()=>(0,n.A)(),f={category:{select:{id:!0,name:!0,order:!0}},ProductTech:{select:{id:!0,name:!0,productId:!0}},ProductAddon:{select:{id:!0,name:!0,productId:!0}},orders:{select:{id:!0,quantity:!0,productId:!0,orderId:!0}},downloadVerifications:{select:{id:!0}}},m=e=>{if(!e)return!1;try{return new URL(e),!e.includes("/admin/")}catch{return!1}},g=e=>e.replace(/[ممممممممتتتdggfjgjgh]+/g,"").trim()||"Unnamed Category",h=(0,o.cache)(async()=>{let e=p();console.log(`${d} [${e}] Fetching all products`);try{let r=await i.db.product.findMany({include:f,orderBy:{name:"asc"}});return console.log(`${d} [${e}]`,{action:"FETCH_ALL",count:r.length,cache:r.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),r.length>0?r:{error:u.NO_PRODUCTS,code:"NO_PRODUCTS",details:"The database contains no products"}}catch(r){return console.error(`${d} [${e}] Error fetching products:`,r),{error:u.FETCH_FAILED,code:r instanceof Error&&r.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:r instanceof Error?r.message:String(r)}}}),x=(0,o.cache)(async(e={})=>{let r=p();console.log(`${d} [${r}] Fetching products with options:`,e);try{let{page:t=1,limit:a=0,search:o,sortBy:n=l,order:s="asc"}=e;if(t<1)throw Error(u.INVALID_PAGE);if(a<0)throw Error(u.INVALID_LIMIT);let c=o?.trim(),p=await i.db.product.findMany({where:{name:c?{contains:c,mode:"insensitive"}:void 0},include:f,orderBy:{[n]:s},skip:a>0?(t-1)*a:0,take:a>0?a:void 0});return console.log(`${d} [${r}]`,{action:"FETCH_FILTERED",count:p.length,options:e,cache:p.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),p.length>0?p:{error:u.NO_PRODUCTS,code:"NO_PRODUCTS",details:"No products match the provided criteria"}}catch(e){return console.error(`${d} [${r}] Error fetching products:`,e),{error:u.FETCH_FAILED,code:e instanceof Error&&e.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:e instanceof Error?e.message:String(e)}}}),y=(0,o.cache)(async(e={})=>{let r=p();console.log(`${d} [${r}] Counting products with search:`,e.search);try{let t=e.search?.trim(),a=await i.db.product.count({where:{name:t?{contains:t,mode:"insensitive"}:void 0}});return console.log(`${d} [${r}]`,{action:"COUNT",count:a,cache:a>0?"MISS":"HIT",timestamp:new Date().toISOString()}),a}catch(e){return console.error(`${d} [${r}] Error counting products:`,e),{error:u.FETCH_FAILED,code:e instanceof Error&&e.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:e instanceof Error?e.message:String(e)}}}),b=(0,o.cache)(async e=>{let r=p();console.log(`${d} [${r}] Fetching best sellers with limit:`,e);try{if(e&&e<1)throw Error(u.INVALID_LIMIT);let t=await i.db.product.findMany({where:{orders:{some:{}}},orderBy:{orders:{_count:"desc"}},include:f,take:e});return console.log(`${d} [${r}]`,{action:"FETCH_BEST_SELLERS",count:t.length,cache:t.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),t.length>0?t:{error:u.NO_BEST_SELLERS,code:"NO_BEST_SELLERS",details:"No products with orders exist"}}catch(e){return console.error(`${d} [${r}] Error fetching best sellers:`,e),{error:u.FETCH_FAILED,code:e instanceof Error&&e.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:e instanceof Error?e.message:String(e)}}}),E=(0,o.cache)(async()=>{let e=p();console.log(`${d} [${e}] Fetching categories with products`);try{let r=(await i.db.category.findMany({include:{products:{include:f,orderBy:{name:"asc"}}},orderBy:{order:"asc"}})).map(e=>({...e,name:g(e.name),products:e.products}));return r.forEach(r=>{console.log(`${d} [${e}] Category: ${r.name}`,{categoryId:r.id,productCount:r.products.length,products:r.products.map(e=>({id:e.id,name:e.name,liveDemoLink:e.liveDemoLink,gitHubLink:e.gitHubLink,validLiveDemo:m(e.liveDemoLink),validGitHub:m(e.gitHubLink),addons:e.ProductAddon?.map(e=>e.name)||[],techs:e.ProductTech?.map(e=>e.name)||[]}))})}),console.log(`${d} [${e}]`,{action:"FETCH_CATEGORIES",categoryCount:r.length,productCount:r.reduce((e,r)=>e+r.products.length,0),cache:r.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),(0,s.revalidatePath)("/projects"),r.length>0?r:{error:u.NO_CATEGORIES,code:"NO_CATEGORIES",details:"The database contains no categories"}}catch(r){return console.error(`${d} [${e}] Error fetching categories:`,r),{error:u.FETCH_FAILED,code:r instanceof Error&&r.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:r instanceof Error?r.message:String(r)}}}),I=(0,o.cache)(async(e,r={})=>{let t=p();console.log(`${d} [${t}] Fetching products for category ID: ${e}`);try{if(!e)throw Error(u.INVALID_CATEGORY_ID);let{page:a=1,limit:o=0,search:n,sortBy:s=l,order:c="asc"}=r;if(a<1)throw Error(u.INVALID_PAGE);if(o<0)throw Error(u.INVALID_LIMIT);let p=n?.trim(),m=await i.db.product.findMany({where:{categoryId:e,name:p?{contains:p,mode:"insensitive"}:void 0},include:f,orderBy:{[s]:c},skip:o>0?(a-1)*o:0,take:o>0?o:void 0});return console.log(`${d} [${t}]`,{action:"FETCH_BY_CATEGORY",categoryId:e,count:m.length,options:r,cache:m.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),m.length>0?m:{error:u.NO_PRODUCTS,code:"NO_PRODUCTS",details:`No products found for category ID ${e}`}}catch(e){return console.error(`${d} [${t}] Error fetching products by category:`,e),{error:u.FETCH_FAILED,code:e instanceof Error&&e.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:e instanceof Error?e.message:String(e)}}});(0,c.D)([h,x,y,b,E,I]),(0,a.A)(h,"7f2544979de890d7916c60932fe5ee5f759b5365c0",null),(0,a.A)(x,"7ffa43ed0897dade5e08899bd427a5fe5bc7bdd788",null),(0,a.A)(y,"7f9ac82f2bd796918e771412c1430170fb6d12eb13",null),(0,a.A)(b,"7f052a8af9a06d9fd4b7042baa15467439d1f8e118",null),(0,a.A)(E,"7f22ce6a32d3aa7fa839e0446ccb584c2390f3567b",null),(0,a.A)(I,"7f18bc50da96989bf0b93b3f21ac4391de1fc2b536",null)},84282:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"0077ce6a148d0e85707852e8a348dc81f12a9101aa":()=>n.generateStaticParams,"405314d7f81b5fdab1a41c30a22de30808b6da403b":()=>n.default,"40f335fa9c1dbbfb6744a66112337f109e086872b4":()=>a.default,"7f052a8af9a06d9fd4b7042baa15467439d1f8e118":()=>i.hx,"7f18bc50da96989bf0b93b3f21ac4391de1fc2b536":()=>i.vu,"7f22ce6a32d3aa7fa839e0446ccb584c2390f3567b":()=>i.ab,"7f2544979de890d7916c60932fe5ee5f759b5365c0":()=>i.AS,"7f45583ff15d1c9812bae202225084401972462b90":()=>o.$,"7f9ac82f2bd796918e771412c1430170fb6d12eb13":()=>i.OF,"7fb19d3121ade774bef4a4bd6894cdfde673b7214b":()=>o.i,"7ffa43ed0897dade5e08899bd427a5fe5bc7bdd788":()=>i.d$});var a=t(99111),o=t(22389),n=t(45984),i=t(83204)},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[243,915,78,172,596,24,984,653,997,372,895,621,279,516,795],()=>t(16832));module.exports=a})();